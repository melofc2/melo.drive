<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Melo Prime | Economia + Internet Premium</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <style>
    body {
      background: radial-gradient(circle at top, #020617, #000000);
    }
    .glass {
      background: linear-gradient(145deg, rgba(255,255,255,0.12), rgba(255,255,255,0.04));
      backdrop-filter: blur(18px);
      border-radius: 2rem;
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow: 0 40px 100px rgba(0,0,0,0.8);
      transition: all 0.4s ease;
    }
    .glass:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 60px 140px rgba(0,0,0,0.95);
    }
    .premium-gradient {
      background: linear-gradient(90deg, #22c55e, #38bdf8, #a855f7);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
  </style>
</head>

<body class="text-white min-h-screen flex flex-col items-center px-6">

  <nav class="w-full max-w-7xl flex items-center justify-between py-8">
    <div class="flex items-center gap-3">
      <i class="fas fa-gem text-green-400 text-2xl"></i>
      <span class="text-2xl font-extrabold premium-gradient">MELO PRIME</span>
    </div>
  </nav>

  <!-- ECONOMIA -->
  <section class="w-full max-w-4xl py-10">
    <div class="glass p-10">
      <h2 class="text-3xl font-bold premium-gradient mb-6 text-center">Calculadora Premium de Economia</h2>

      <form id="driveForm" class="space-y-6">
        <input type="number" id="distancia" placeholder="Distância (km)" class="w-full p-4 rounded-xl bg-black/70 border border-gray-700" required />
        <input type="number" id="litros" placeholder="Litros" class="w-full p-4 rounded-xl bg-black/70 border border-gray-700" required />
        <input type="number" id="preco" step="0.01" placeholder="Preço R$" class="w-full p-4 rounded-xl bg-black/70 border border-gray-700" required />
        <button class="w-full bg-green-500 p-4 rounded-xl font-bold text-black">Calcular</button>
        <div id="resultado" class="hidden mt-4"></div>
      </form>
    </div>
  </section>

  <!-- VENDA MANUAL COM CONFIRMAÇÃO -->
  <section class="w-full max-w-4xl py-16">
    <div class="glass p-10">
      <h2 class="text-3xl font-bold premium-gradient mb-6 text-center">Arquivos Premium EHI</h2>
      <p class="text-center text-gray-300 mb-4">Valor fixo <span class="text-green-400 font-bold">R$ 15,00</span></p>

      <div class="flex justify-center items-center gap-6 mb-8 text-3xl text-white/80">
        <div class="flex flex-col items-center">
          <i class="fa-brands fa-pix text-green-400"></i>
          <span class="text-xs mt-1">PIX</span>
        </div>
        <div class="flex flex-col items-center">
          <i class="fa-regular fa-credit-card text-blue-400"></i>
          <span class="text-xs mt-1">Cartão de Crédito</span>
        </div>
        <div class="flex flex-col items-center">
          <i class="fa-solid fa-money-check-dollar text-purple-400"></i>
          <span class="text-xs mt-1">Cartão de Débito</span>
        </div>
      </div>

      <form id="ehiForm" class="space-y-6">
        <select id="arquivo" class="w-full p-4 rounded-xl bg-black/70 border border-gray-700" required>
          <option value="">Selecione o Arquivo</option>
          <option>Claro Waze #1.ehi</option>
          <option>Vivo Controle #1.ehi</option>
          <option>Tim Front 02.ehi</option>
        </select>

        <input type="text" id="nome" placeholder="Seu Nome" class="w-full p-4 rounded-xl bg-black/70 border border-gray-700" required />
        <input type="email" id="email" placeholder="Seu Email" class="w-full p-4 rounded-xl bg-black/70 border border-gray-700" required />

        <button type="submit" class="w-full bg-gradient-to-r from-green-500 to-blue-500 p-5 rounded-full font-bold text-black">
          Pagar R$15,00
        </button>

        <div class="mt-6 p-4 rounded-xl bg-yellow-500/10 border border-yellow-400 text-yellow-300 text-sm">
          ⚠ Após realizar o pagamento, você será direcionado para enviar o comprovante automaticamente.
          <br>
          ⚠ O envio do arquivo será feito manualmente após confirmação do pagamento.
        </div>
      </form>
    </div>
  </section>

<script>

// ECONOMIA
 document.getElementById('driveForm').addEventListener('submit', function(e){
   e.preventDefault();
   const d = parseFloat(distancia.value);
   const l = parseFloat(litros.value);
   const p = parseFloat(preco.value);
   if(!d || !l || !p || l <= 0) return alert("Preencha corretamente");
   const consumo = d/l;
   const total = l*p;
   resultado.classList.remove("hidden");
   resultado.innerHTML = `Consumo: ${consumo.toFixed(2)} km/L | Total: R$ ${total.toFixed(2)}`;
 });

// PAGAMENTO MANUAL CONTROLADO
 document.getElementById('ehiForm').addEventListener('submit', function(e){
   e.preventDefault();

   const arquivo = document.getElementById('arquivo').value;
   const nome = document.getElementById('nome').value;
   const email = document.getElementById('email').value;

   if(!arquivo || !nome || !email){
     alert("Preencha todos os campos");
     return;
   }

   // Link fixo Mercado Pago com valor já configurado em R$15
   const paymentLink = "https://mpago.la/2wtH8Z6";

   // Salva dados temporariamente
   localStorage.setItem("cliente_nome", nome);
   localStorage.setItem("cliente_email", email);
   localStorage.setItem("cliente_arquivo", arquivo);

   // Redireciona para pagamento
   window.location.href = paymentLink;
 });

// Ao voltar do pagamento, abre email automático
 window.addEventListener("load", function(){
   const nome = localStorage.getItem("cliente_nome");
   const email = localStorage.getItem("cliente_email");
   const arquivo = localStorage.getItem("cliente_arquivo");

   if(window.location.search.includes("approved")){
     document.body.insertAdjacentHTML("afterbegin", `
       <div class="w-full bg-green-600 text-white text-center py-4 font-bold">
         ✅ Pagamento aprovado! Agora envie o comprovante para finalizar.
       </div>
     `);
   }

   if(nome && email && arquivo && window.location.search.includes("approved")){

     const subject = encodeURIComponent("Comprovante de Pagamento - Melo Prime");
     const body = encodeURIComponent(
       `Pagamento realizado!\n\nNome: ${nome}\nEmail: ${email}\nArquivo: ${arquivo}\nValor: R$15\n\nAnexe o comprovante do pagamento nesta mensagem.`
     );

     setTimeout(()=>{
       window.location.href = `mailto:diegodemelotavares@gmail.com?subject=${subject}&body=${body}`;
     },1500);

     localStorage.clear();
   }
 });

</script>

</body>
</html>
